var Page=React.createClass({displayName:"Page",render:function(){var a=this.props.title,b=this.props.url,c=this.props.index,d="main-menu",e=this.props.pageIncognito,f=this.props.openUrl,g=this.props.dragBookmark,h=this.props.dropBookmark;return e&&(d+=" main-menu-incognito"),React.createElement("div",{className:d,onClick:f.bind(null,b),draggable:!0,onDragStart:g.bind(null,c),onDragEnd:h},React.createElement("h2",null,a))}}),Photo=React.createClass({displayName:"Photo",render:function(){var a=this.props.url,b=this.props.index,c="photo",d=this.props.pageIncognito,e=this.props.openUrl,f=this.props.dragBookmark,g=this.props.dropBookmark;return d&&(c+=" photo-incognito"),React.createElement("img",{className:c,src:a,onClick:e.bind(null,a),draggable:!0,onDragStart:f.bind(null,b),onDragEnd:g},null)}}),Video=React.createClass({displayName:"Video",render:function(){var a=this.props.url,b=this.props.index,c="video",d=this.props.pageIncognito,e=this.props.openUrl,f=this.props.dragBookmark,g=this.props.dropBookmark;return d&&(c+=" video-incognito"),React.createElement("video",{className:c,controls:!0,onClick:e.bind(null,a),draggable:!0,onDragStart:f.bind(null,b),onDragEnd:g},React.createElement("source",{src:a},null))}}),Main=React.createClass({displayName:"Main",getInitialState:function(){return{pageInfo:this.getPageInfo(),header:document.getElementById("redHeader"),pages:[],photos:[],videos:[],pageToRender:null}},componentWillMount:function(){this.state.pageInfo.isIncognito&&(document.getElementById("mainHeader").style.backgroundColor="#191919",document.getElementsByTagName("footer")[0].style.backgroundColor="#191919"),this.state.header.addEventListener("dragover",function(a){a.preventDefault()},!1),this.state.header.addEventListener("drop",this.deleteBookmark,!1),"PAGES"===this.state.pageInfo.pageType?this.getPages():"PHOTOS"===this.state.pageInfo.pageType?this.getPhotos():"VIDEOS"===this.state.pageInfo.pageType&&this.getVideos()},getPageInfo:function(){var a={currentPage:document.getElementById("container"),isIncognito:chrome.extension.getBackgroundPage().bookmarks.pageInfo.isIncognito};return a.pageType=a.currentPage.getAttribute("data-pageType").toUpperCase(),a},dragBookmark:function(a,b){b.dataTransfer.setData("index",a),this.state.header.style.display="block"},dropBookmark:function(){this.state.header.style.display="none"},getBookmarks:function(a,b){chrome.storage.sync.get(a,function(c){if(chrome.runtime.lastError)return console.error("Unable to retrieve the bookmarks!"),void 0;var d=c[a]||[];b(d)})},deleteBookmark:function(a){var b=window.confirm("Are you sure you want to remove this bookmark?"),c=a.dataTransfer.getData("index");b&&("PAGES"===this.state.pageInfo.pageType?this.deletePage(c):"PHOTOS"===this.state.pageInfo.pageType?this.deletePhoto(c):"VIDEOS"===this.state.pageInfo.pageType&&this.deleteVideo(c))},openUrl:function(a){chrome.runtime.sendMessage({action:"openUrl",url:a})},getPages:function(){var a=this,b=[];this.getBookmarks("Pages",function(c){for(var d=0;d<c.length;d++){var e=c[d];(!e.isIncognito||a.state.pageInfo.isIncognito)&&b.push(React.createElement(Page,{title:e.key,url:e.value,index:d,pageIncognito:a.state.pageInfo.isIncognito,openUrl:a.openUrl,dragBookmark:a.dragBookmark,dropBookmark:a.dropBookmark}))}a.setState({pages:b,pageToRender:React.createElement("div",null,b)})})},deletePage:function(a){var b=this.state.pages;this.setState({pages:b.splice(a,1)}),this.getBookmarks("Pages",function(b){b.splice(a,1),chrome.storage.sync.set({Pages:b})})},getPhotos:function(){var a=this,b=[];this.getBookmarks("Photos",function(c){for(var d=0;d<c.length;d++){var e=c[d];(!e.isIncognito||a.state.pageInfo.isIncognito)&&b.push(React.createElement(Photo,{url:e.url,index:d,pageIncognito:a.state.pageInfo.isIncognito,openUrl:a.openUrl,dragBookmark:a.dragBookmark,dropBookmark:a.dropBookmark}))}a.setState({photos:b,pageToRender:React.createElement("div",null,b)})})},deletePhoto:function(a){var b=this.state.photos;this.setState({photos:b.splice(a,1)}),this.getBookmarks("Photos",function(b){b.splice(a,1),chrome.storage.sync.set({Photos:b})})},getVideos:function(){var a=this,b=[];this.getBookmarks("Videos",function(c){for(var d=0;d<c.length;d++){var e=c[d];(!e.isIncognito||a.state.pageInfo.isIncognito)&&b.push(React.createElement(Video,{url:e.url,index:d,pageIncognito:a.state.pageInfo.isIncognito,openUrl:a.openUrl,dragBookmark:a.dragBookmark,dropBookmark:a.dropBookmark}))}a.setState({videos:b,pageToRender:React.createElement("div",null,b)})})},deleteVideo:function(a){var b=this.state.videos;this.setState({videos:b.splice(a,1)}),this.getBookmarks("Videos",function(b){b.splice(a,1),chrome.storage.sync.set({Videos:b})})},render:function(){return this.state.pageToRender?this.state.pageToRender:React.createElement("h3",null,"Loading...")}});React.render(React.createElement(Main),document.getElementById("container"));